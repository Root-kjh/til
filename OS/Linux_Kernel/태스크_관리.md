# 태스크 관리

* 태스크 : 자원 소유권의 단위
* 쓰레드 : 수행의 단위
* 프로세스 : 동작중인 프로그램

### 사용자 입장에서의 프로세스 구조

32bit의 운영체제는 각 프로세스에게 총 4GB 크기의 가상공간을 할당한다.

리눅스는 이중 0-3GB를 사용자 공간으로 사용하고, 나머지 3-4GB를 커널 공간으로 사용한다.
(64bit 의 경우 2^64=16EB 크기의 가상 공간 중 약 128TB의 공간을 사용자 공간으로 사용한다.)

![프로세스 구조](https://t1.daumcdn.net/cfile/tistory/2453664C5444038310)
출처 : [ORANG](http://orang.tistory.com/entry/%EB%A6%AC%EB%88%85%EC%8A%A4-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B5%AC%EC%A1%B0)

프로세스는 크게 텍스트, 데이터, 스택, 힙이라는 네 영역으로 구분할 수 있다.

텍스트 영역 : CPU에서 직접 수행되는 명령어가 들어가 있다.

데이터 영역 : 전역변수가 들어가있다.

스택 영역 : 지역변수, 인자, 함수의 리턴 주소 등이 존재한다.

힙 영역 : 동적 할당받은 내용이 존재한다.

이떄 각 영역을 세그먼트 혹은 가상 메모리 객체라고 부른다.

### 리눅스의 태스크 모델

프로세스는 자신이 사용하는 자원과 그 자원에서 수행되는 수행 흐름으로 수성된다.

리눅스는 이를 관리하기 위해 task_struct라는 자료구조를 생성한다.

리눅스 커널은 프로세스 와 쓰레드 모두 task_struct로 관리한다.

![리눅스의 태스크 관리 구조](https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory&fname=http%3A%2F%2Fcfile21.uf.tistory.com%2Fimage%2F211BEC4C51C727FA2ED4A6)

출처 : [티스토리 블로그](http://muscle-fairy.tistory.com/m/149?category=518502)

이러한 리눅스의 특성은 실제 함수들이 구현된 방식에서도 나타난다.

![태스크 생성과 관계된 함수의 흐름](http://thumbnail.egloos.net/600x0/http://pds22.egloos.com/pds/201205/01/70/a0027070_4f9f3e585b9be.png)

출처 : [egloos 블로그](http://egloos.zum.com/hahaha333/v/3835505)

