## 데이터베이스가 없으면 무엇이 곤란한가?

---

#### 대량의 데이터 중에서 필요한 것을 빨리 반환할 수 없다.

DB는 방대한 양의 데이터 중 필요한 데이터를 빠르게 반한하기 위해 **[B+Tree 인덱스]** 혹은 **[해시 인덱스]** 와 같은 데이터 구조로 레코드를 관리한다.


#### 대량의 데이터를 메모리 내에서만으로는 취급할 수 없다.

Java의 HashMap 클래스는 키와 값의 쌍으로 관리할 수 있으며, 키를 지정하면 초고속으로 값을 취할 수 있다.

하지만 대량의 사용자를 취급하기에는 어려울 것이며, 메모리의 특성상 시스템 다운등이 일어나면 데이터가 날아가 버린다.

#### 장애가 발생했을 때 빠른 복구가 어렵다.

데이터베이스가 사용되는 이유 중 가장 현실적인 이유는 성능 면에서의 이유와 장애에 대한 대책이라고 생각한다.

장애가 발생했을 때 복구하는 방법은 여러가지가 있다.
* 데이터가 손실되지 않은 경우, 서비스를 다시 시작하거나 서버를 증설한다.
* 미리 데이터를 백업해두고, 복구한다.
> 하지만 백업파일을 복구하는 방식은 여러 문제가 존재한다.
> 1. 최종 백업 이후에 업데이트 된 결과를 되돌릴 수 없다.
> 2. 백업 데이터를 다시 되돌리는 처리에도 시간이 걸리고, 그 기간 동안 다운타임이 된다.
> 3. 백업 중, 섣불리 업데이트를 하면 백업이 손상될 위험이 있다.

>만약 사용자가 삼품을 포인트로 구매하는 중 백업이 진행되면, 백업 내용에는 사용자의 포인트만이 감소되어 있고, 삼품 수는 증가하지 않는 일이 발생할 수 있다.

* DB는 **트랜잭션** 이라는 개념을 구현해 DB의 무결성 관리를 담당시킬 수 있다.
> 자세한 내용은 후에 나온다.

#### 병렬성 제어가 어렵다.

>여러 사람이 이용하는 애플리케이션에서 어려운 기술적인 포인트 중 하나가 **베타제어**이다.

예를 들어 동일한 파일에 대해 여러 사람이 동시에 쓰면 베타 제어를 하지 않은 경우, 먼저 쓴 사람의 결과는 나중에 쓴 사람에 의해 덮어 쓰여지게 된다.

DB는 각 행마다의 범위를 갖게 해 각 행마다 동시에 한명이 접근할 수 있게 허용한다.

#### 데이터 무결성을 보장하는 것이 어렵다.

>데이터 자체가 불일치를 일으키지 않는 구조

예를 들어 사용자 ID의 경우, 동일한 ID가 생성되지 않도록 고유의 값으로 할당해야 할 필요가 있다.

이러한 처리는 애플리케이션 로직으로도 구현할 수 있지만, DB가 가지는 **참조 무결정 제약 조건** 기능을 이용하면 DB기능으로 값을 체크할 수 있다.
